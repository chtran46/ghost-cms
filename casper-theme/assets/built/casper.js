!function(o){"use strict";o.fn.fitVids=function(e){var t,n,r={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(t=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(n.childNodes[1])),e&&o.extend(r,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];r.customSelector&&e.push(r.customSelector);var i=".fitvidsignore";r.ignore&&(i=i+", "+r.ignore);e=o(this).find(e.join(","));(e=(e=e.not("object object")).not(i)).each(function(){var e,t,n=o(this);0<n.parents(i).length||"embed"===this.tagName.toLowerCase()&&n.parent("object").length||n.parent(".fluid-width-video-wrapper").length||(n.css("height")||n.css("width")||!isNaN(n.attr("height"))&&!isNaN(n.attr("width"))||(n.attr("height",9),n.attr("width",16)),e=("object"===this.tagName.toLowerCase()||n.attr("height")&&!isNaN(parseInt(n.attr("height"),10))?parseInt(n.attr("height"),10):n.height())/(isNaN(parseInt(n.attr("width"),10))?n.width():parseInt(n.attr("width"),10)),n.attr("name")||(t="fitvid"+o.fn.fitVids._count,n.attr("name",t),o.fn.fitVids._count++),n.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),n.removeAttr("height").removeAttr("width"))})})},o.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n,i=t();for(n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(window,function(){return i={},r.m=n=[function(e,t,n){"use strict";n.r(t);var c="fslightbox-",n="".concat(c,"styles"),a="".concat(c,"cursor-grabbing"),l="".concat(c,"full-dimension"),u="".concat(c,"flex-centered"),f="".concat(c,"open"),B="".concat(c,"transform-transition"),d="".concat(c,"absoluted"),s="".concat(c,"slide-btn"),h="".concat(s,"-container"),q="".concat(c,"fade-in"),X="".concat(c,"fade-out"),$=q+"-strong",p=X+"-strong",t="".concat(c,"opacity-"),m="".concat(t,"1"),g="".concat(c,"source");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){var n,e=e.props,i=0,r={};this.getSourceTypeFromLocalStorageByUrl=function(e){return n[e]||t(e)},this.handleReceivedSourceTypeForUrl=function(e,t){!1===r[t]&&(i--,"invalid"!==e?r[t]=e:delete r[t],0===i&&(function(e,t){for(var n in t)e[n]=t[n]}(n,r),localStorage.setItem("fslightbox-types",JSON.stringify(n))))};var t=function(e){i++,r[e]=!1};e.disableLocalStorage?(this.getSourceTypeFromLocalStorageByUrl=function(){},this.handleReceivedSourceTypeForUrl=function(){}):(n=JSON.parse(localStorage.getItem("fslightbox-types")))||(n={},this.getSourceTypeFromLocalStorageByUrl=t)}function x(e,t,n,i){var r=e.data,o=e.elements.sources,s=n/i,a=0;this.adjustSize=function(){if((a=r.maxSourceWidth/s)<r.maxSourceHeight)return n<r.maxSourceWidth&&(a=i),c();a=i>r.maxSourceHeight?r.maxSourceHeight:i,c()};var c=function(){o[t].style.width=a*s+"px",o[t].style.height=a+"px"}}function y(e,n){var i=this,r=e.collections.sourceSizers,t=e.elements,o=t.sourceAnimationWrappers,s=t.sourceMainWrappers,a=t.sources,c=e.resolve;function l(e,t){r[n]=c(x,[n,e,t]),r[n].adjustSize()}this.runActions=function(e,t){a[n].classList.add(m),o[n].classList.add($),s[n].removeChild(s[n].firstChild),l(e,t),i.runActions=l}}function b(e,t){var n,i=this,r=e.elements.sources,o=e.props,s=(0,e.resolve)(y,[t]);this.handleImageLoad=function(e){var t=e.target,e=t.naturalWidth,t=t.naturalHeight;s.runActions(e,t)},this.handleVideoLoad=function(e){var t=e.target,e=t.videoWidth,t=t.videoHeight;n=!0,s.runActions(e,t)},this.handleNotMetaDatedVideoLoad=function(){n||i.handleYoutubeLoad()},this.handleYoutubeLoad=function(){var e=1920,t=1080;o.maxYoutubeDimensions&&(e=o.maxYoutubeDimensions.width,t=o.maxYoutubeDimensions.height),s.runActions(e,t)},this.handleCustomLoad=function(){setTimeout(function(){var e=r[t];s.runActions(e.offsetWidth,e.offsetHeight)})}}function w(e,t,n){var i=e.elements.sources,e=e.props.customClasses,e=e[t]||"";i[t].className=n+" "+e}function S(e,t){var n,i=e.elements.sources,r=e.props.customAttributes;for(n in r[t])i[t].setAttribute(n,r[t][n])}function L(e,t){var n=e.collections.sourceLoadHandlers,i=e.elements,r=i.sources,o=i.sourceAnimationWrappers,i=e.props.sources;r[t]=document.createElement("img"),w(e,t,g),r[t].src=i[t],r[t].onload=n[t].handleImageLoad,S(e,t),o[t].appendChild(r[t])}function I(e,t){var n=e.collections.sourceLoadHandlers,i=e.elements,r=i.sources,o=i.sourceAnimationWrappers,s=e.props,i=s.sources,s=s.videosPosters;r[t]=document.createElement("video"),w(e,t,g),r[t].src=i[t],r[t].onloadedmetadata=function(e){n[t].handleVideoLoad(e)},r[t].controls=!0,S(e,t),s[t]&&(r[t].poster=s[t]);s=document.createElement("source");s.src=i[t],r[t].appendChild(s),setTimeout(n[t].handleNotMetaDatedVideoLoad,3e3),o[t].appendChild(r[t])}function T(e,t){var n=e.collections.sourceLoadHandlers,i=e.elements,r=i.sources,o=i.sourceAnimationWrappers,i=e.props.sources;r[t]=document.createElement("iframe"),w(e,t,"".concat(g," ").concat(c,"youtube-iframe")),r[t].src="https://www.youtube.com/embed/".concat(i[t].match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2],"?enablejsapi=1"),r[t].allowFullscreen=!0,S(e,t),o[t].appendChild(r[t]),n[t].handleYoutubeLoad()}function k(e,t){var n=e.collections.sourceLoadHandlers,i=e.elements,r=i.sources,o=i.sourceAnimationWrappers,i=e.props.sources;r[t]=i[t],w(e,t,"".concat(r[t].className," ").concat(g)),o[t].appendChild(r[t]),n[t].handleCustomLoad()}function E(e,t){var n=e.elements,i=n.sources,r=n.sourceAnimationWrappers,n=n.sourceMainWrappers;e.props.sources,i[t]=document.createElement("div"),i[t].className="".concat(c,"invalid-file-wrapper ").concat(u),i[t].innerHTML="Invalid source",r[t].classList.add($),r[t].appendChild(i[t]),n[t].removeChild(n[t].firstChild)}function F(i){var e=i.collections,r=e.sourceLoadHandlers,o=e.sourcesRenderFunctions,s=i.core.sourceDisplayFacade,a=i.resolve;this.runActionsForSourceTypeAndIndex=function(e,t){var n;switch("invalid"!==e&&(r[t]=a(b,[t])),e){case"image":n=L;break;case"video":n=I;break;case"youtube":n=T;break;case"custom":n=k;break;default:n=E}o[t]=function(){return n(i,t)},s.displaySourcesWhichShouldBeDisplayed()}}function C(){var t,n,i,r=function(e){var t=document.createElement("a");return t.href=e,"www.youtube.com"===t.hostname},o=function(e){return e.slice(0,e.indexOf("/"))};function s(){if(4!==i.readyState){if(2===i.readyState){var e;switch(o(i.getResponseHeader("content-type"))){case"image":e="image";break;case"video":e="video";break;default:e="invalid"}i.onreadystatechange=null,i.abort(),n(e)}}else n("invalid")}this.setUrlToCheck=function(e){t=e},this.getSourceType=function(e){if(r(t))return e("youtube");n=e,(i=new XMLHttpRequest).onreadystatechange=s,i.open("GET",t,!0),i.send()}}function P(e,n,i){var t=e.props,r=t.types,o=t.type,s=t.sources,a=e.resolve;this.getTypeSetByClientForIndex=function(e){var t;return r&&r[e]?t=r[e]:o&&(t=o),t},this.retrieveTypeWithXhrForIndex=function(t){var e=a(C);e.setUrlToCheck(s[t]),e.getSourceType(function(e){n.handleReceivedSourceTypeForUrl(e,s[t]),i.runActionsForSourceTypeAndIndex(e,t)})}}function A(e,t,n,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"width",t),r.setAttributeNS(null,"height",t),r.setAttributeNS(null,"viewBox",n);n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttributeNS(null,"class","".concat(c,"svg-path")),n.setAttributeNS(null,"d",i),r.appendChild(n),e.appendChild(r),r}function N(e,t){var n=document.createElement("div");return n.className="".concat(c,"toolbar-button ").concat(u),n.title=t,e.appendChild(n),n}function r(s,e){var t,a=document.createElement("div");a.className="".concat(c,"toolbar"),e.appendChild(a),function(){var e=s.componentsServices,t=s.core.fullscreenToggler,n=s.data,i="M4.5 11H3v4h4v-1.5H4.5V11zM3 7h1.5V4.5H7V3H3v4zm10.5 6.5H11V15h4v-4h-1.5v2.5zM11 3v1.5h2.5V7H15V3h-4z",r=N(a);r.title="Enter fullscreen";var o=A(r,"20px","0 0 18 18",i);e.enterFullscreen=function(){n.isFullscreenOpen=!0,r.title="Exit fullscreen",o.setAttributeNS(null,"width","24px"),o.setAttributeNS(null,"height","24px"),o.setAttributeNS(null,"viewBox","0 0 950 1024"),o.firstChild.setAttributeNS(null,"d","M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z")},e.exitFullscreen=function(){n.isFullscreenOpen=!1,r.title="Enter fullscreen",o.setAttributeNS(null,"width","20px"),o.setAttributeNS(null,"height","20px"),o.setAttributeNS(null,"viewBox","0 0 18 18"),o.firstChild.setAttributeNS(null,"d",i)},r.onclick=function(){n.isFullscreenOpen?t.exitFullscreen():t.enterFullscreen()}}(),t=s,(e=N(a,"Close")).onclick=t.core.lightboxCloser.closeLightbox,A(e,"20px","0 0 24 24","M 4.7070312 3.2929688 L 3.2929688 4.7070312 L 10.585938 12 L 3.2929688 19.292969 L 4.7070312 20.707031 L 12 13.414062 L 19.292969 20.707031 L 20.707031 19.292969 L 13.414062 12 L 20.707031 4.7070312 L 19.292969 3.2929688 L 12 10.585938 L 4.7070312 3.2929688 z")}function o(a){var e=a.props.sources,t=a.elements.container,n=document.createElement("div");n.className="".concat(c,"nav"),t.appendChild(n),r(a,n),1<e.length&&function(e){var t=a.componentsServices,n=a.props.sources,i=(a.stageIndexes,document.createElement("div"));i.className="".concat(c,"slide-number-container");var r=document.createElement("div");r.className=u;var o=document.createElement("span");t.setSlideNumber=function(e){return o.innerHTML=e};var s=document.createElement("span");s.className="".concat(c,"slash"),(t=document.createElement("div")).innerHTML=n.length,i.appendChild(r),r.appendChild(o),r.appendChild(s),r.appendChild(t),e.appendChild(i),setTimeout(function(){55<r.offsetWidth&&(i.style.justifyContent="flex-start")})}(n)}function _(e,t){var n=this,i=e.elements.sourceMainWrappers,r=e.props,o=0;this.byValue=function(e){return o=e,n},this.negative=function(){s(-a())},this.zero=function(){s(0)},this.positive=function(){s(a())};var s=function(e){i[t].style.transform="translateX(".concat(e+o,"px)"),o=0},a=function(){return(1+r.slideDistance)*innerWidth}}function O(e,t,n,i){var r=e.elements.container,o=n.charAt(0).toUpperCase()+n.slice(1),e=document.createElement("div");e.className="".concat(h," ").concat(h,"-").concat(n),e.title="".concat(o," slide"),e.onclick=t,o=e,t=i,(i=document.createElement("div")).className="".concat(s," ").concat(u),A(i,"20px","0 0 20 20",t),o.appendChild(i),r.appendChild(e)}function U(e,t){e=e.classList;e.contains(t)&&e.remove(t)}function J(e){var t=this,n=e.core,i=n.eventsDispatcher,r=n.fullscreenToggler,o=n.globalEventsController,s=n.scrollbarRecompensor,a=e.data,c=e.elements,l=e.props,u=e.sourcePointerProps;this.isLightboxFadingOut=!1,this.runActions=function(){t.isLightboxFadingOut=!0,c.container.classList.add(p),o.removeListeners(),l.exitFullscreenOnClose&&a.isFullscreenOpen&&r.exitFullscreen(),setTimeout(function(){t.isLightboxFadingOut=!1,u.isPointering=!1,c.container.classList.remove(p),document.documentElement.classList.remove(f),s.removeRecompense(),document.body.removeChild(c.container),i.dispatch("onClose")},270)}}function Y(e){var e=e.core,t=e.lightboxCloser,n=e.fullscreenToggler,i=e.slideChangeFacade;this.listener=function(e){switch(e.key){case"Escape":t.closeLightbox();break;case"ArrowLeft":i.changeToPrevious();break;case"ArrowRight":i.changeToNext();break;case"F11":e.preventDefault(),n.enterFullscreen()}}}function Q(e){var n=e.collections.sourceMainWrappersTransformers,i=e.elements,r=e.sourcePointerProps,o=e.stageIndexes;function s(e,t){n[e].byValue(r.swipedX)[t]()}this.runActionsForEvent=function(e){var t,n;i.container.contains(i.slideSwipingHoverer)||i.container.appendChild(i.slideSwipingHoverer),n=i.container,t=a,(n=n.classList).contains(t)||n.add(t),r.swipedX=e.screenX-r.downScreenX,s(o.current,"zero"),void 0!==o.previous&&0<r.swipedX?s(o.previous,"negative"):void 0!==o.next&&r.swipedX<0&&s(o.next,"positive")}}function G(e){var t=e.props.sources,n=e.resolve,i=e.sourcePointerProps,r=n(Q);1===t.length?this.listener=function(){i.swipedX=1}:this.listener=function(e){i.isPointering&&r.runActionsForEvent(e)}}function j(e){var t=e.collections.sourceMainWrappersTransformers,n=e.core.slideIndexChanger,i=e.elements.sourceMainWrappers,r=e.stageIndexes;this.runPositiveSwipedXActions=function(){void 0===r.previous||(o("positive"),n.changeTo(r.previous)),o("zero")},this.runNegativeSwipedXActions=function(){void 0===r.next||(o("negative"),n.changeTo(r.next)),o("zero")};var o=function(e){i[r.current].classList.add(B),t[r.current][e]()}}function D(e,t){e.contains(t)&&e.removeChild(t)}function R(e){var t=e.core.lightboxCloser,n=e.elements,i=e.resolve,r=e.sourcePointerProps,o=i(j);this.runNoSwipeActions=function(){D(n.container,n.slideSwipingHoverer),r.isSourceDownEventTarget||t.closeLightbox(),r.isPointering=!1},this.runActions=function(){0<r.swipedX?o.runPositiveSwipedXActions():o.runNegativeSwipedXActions(),D(n.container,n.slideSwipingHoverer),n.container.classList.remove(a),r.isPointering=!1}}function K(e){var t=e.resolve,n=e.sourcePointerProps,i=t(R);this.listener=function(){n.isPointering&&(n.swipedX?i.runActions():i.runNoSwipeActions())}}function z(e){var i,t,n,r,o,s,a,c,l,u,d,h,p,f,m,g,v,x,y,b,w,S,L,I,T,k,E,F,C,P,A,N,_,O,Q,j,D,R,z,M,W;function H(e){d[e]&&(d[e](),delete d[e])}function V(){document.body.offsetHeight>innerHeight&&(document.body.style.marginRight=A.scrollbarWidth+"px")}z=e.core.classFacade,i=e.elements,z.removeFromEachElementClassIfContains=function(e,t){for(var n=0;n<i[e].length;n++)U(i[e][n],t)},M=e.core.eventsDispatcher,W=e.props,M.dispatch=function(e){W[e]&&W[e]()},R=e.componentsServices,(z=e.core.fullscreenToggler).enterFullscreen=function(){R.enterFullscreen();var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},z.exitFullscreen=function(){R.exitFullscreen(),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},M=e.core,z=M.globalEventsController,O=M.windowResizeActioner,M=e.resolve,Q=M(Y),j=M(G),D=M(K),z.attachListeners=function(){document.addEventListener("pointermove",j.listener),document.addEventListener("pointerup",D.listener),addEventListener("resize",O.runActions),document.addEventListener("keydown",Q.listener)},z.removeListeners=function(){document.removeEventListener("pointermove",j.listener),document.removeEventListener("pointerup",D.listener),removeEventListener("resize",O.runActions),document.removeEventListener("keydown",Q.listener)},M=e.core.lightboxCloser,_=(0,e.resolve)(J),M.closeLightbox=function(){_.isLightboxFadingOut||_.runActions()},Z(e),A=e.data,(N=e.core.scrollbarRecompensor).addRecompense=function(){"complete"===document.readyState?V():addEventListener("load",function(){V(),N.addRecompense=V})},N.removeRecompense=function(){document.body.style.removeProperty("margin-right")},z=e.core,M=z.slideChangeFacade,C=z.slideIndexChanger,P=z.stageManager,1<e.props.sources.length?(M.changeToPrevious=function(){C.jumpTo(P.getPreviousSlideIndex())},M.changeToNext=function(){C.jumpTo(P.getNextSlideIndex())}):(M.changeToPrevious=function(){},M.changeToNext=function(){}),b=(z=e).collections.sourceMainWrappersTransformers,w=z.componentsServices,M=z.core,S=M.classFacade,L=M.slideIndexChanger,I=M.sourceDisplayFacade,T=M.stageManager,k=z.elements.sourceAnimationWrappers,E=z.stageIndexes,x=function(){S.removeFromEachElementClassIfContains("sourceAnimationWrappers",X)},y=[],F=function(){y.push(!0),setTimeout(function(){y.pop(),y.length||x()},300)},L.changeTo=function(e){E.current=e,T.updateStageIndexes(),w.setSlideNumber(e+1),I.displaySourcesWhichShouldBeDisplayed()},L.jumpTo=function(e){var t=E.current;L.changeTo(e),S.removeFromEachElementClassIfContains("sourceMainWrappers",B),U(k[t],$),U(k[t],q),k[t].classList.add(X),U(k[e],$),U(k[e],X),k[e].classList.add(q),F(),b[e].zero(),setTimeout(function(){t!==E.current&&b[t].negative()},270)},z=e.core,f=z.classFacade,z=z.sourcesPointerDown,m=e.elements.sources,g=e.sourcePointerProps,v=e.stageIndexes,z.listener=function(e){"VIDEO"!==e.target.tagName&&e.preventDefault(),g.isPointering=!0,g.downScreenX=e.screenX,g.swipedX=0;var t=m[v.current];t&&t.contains(e.target)?g.isSourceDownEventTarget=!0:g.isSourceDownEventTarget=!1,f.removeFromEachElementClassIfContains("sourceMainWrappers",B)},d=e.collections.sourcesRenderFunctions,z=e.core.sourceDisplayFacade,h=e.props,p=e.stageIndexes,z.displaySourcesWhichShouldBeDisplayed=function(){if(h.loadOnlyCurrentSource)H(p.current);else for(var e in p)H(p[e])},c=e.stageIndexes,l=e.core.stageManager,u=e.props.sources.length-1,l.getPreviousSlideIndex=function(){return 0===c.current?u:c.current-1},l.getNextSlideIndex=function(){return c.current===u?0:c.current+1},l.updateStageIndexes=0==u?function(){}:1==u?function(){0===c.current?(c.next=1,delete c.previous):(c.previous=0,delete c.next)}:function(){c.previous=l.getPreviousSlideIndex(),c.next=l.getNextSlideIndex()},l.isSourceInStage=u<=2?function(){return!0}:function(e){var t=c.current;if(0===t&&e===u||t===u&&0===e)return!0;e=t-e;return-1==e||0==e||1==e},z=e.collections,t=z.sourceMainWrappersTransformers,n=z.sourceSizers,z=e.core.windowResizeActioner,r=e.data,o=e.elements.sourceMainWrappers,s=e.props,a=e.stageIndexes,z.runActions=function(){innerWidth<992?r.maxSourceWidth=innerWidth:r.maxSourceWidth=.9*innerWidth,r.maxSourceHeight=.9*innerHeight;for(var e=0;e<s.sources.length;e++)U(o[e],B),e!==a.current&&t[e].negative(),n[e]&&n[e].adjustSize()}}function M(a){var e=a.core.eventsDispatcher,t=a.data,n=a.elements,i=a.props.sources;t.isInitialized=!0,t.scrollbarWidth=function(e){var t=e.props.disableLocalStorage;if(!t){var n=localStorage.getItem("fslightbox-scrollbar-width");if(n)return n}i=document.createElement("div"),(e=i.style).visibility="hidden",e.width="100px",e.msOverflowStyle="scrollbar",e.overflow="scroll",n=i,(e=document.createElement("div")).style.width="100%",i=e,document.body.appendChild(n),e=n.offsetWidth,n.appendChild(i);var i=i.offsetWidth;return document.body.removeChild(n),i=e-i,t||localStorage.setItem("fslightbox-scrollbar-width",i.toString()),i}(a),function(){for(var e=a.collections.sourceMainWrappersTransformers,t=a.props.sources,n=a.resolve,i=0;i<t.length;i++)e[i]=n(_,[i])}(),z(a),n.container=document.createElement("div"),n.container.className="".concat(c,"container ").concat(l," ").concat($),(n=a.elements).slideSwipingHoverer=document.createElement("div"),n.slideSwipingHoverer.className="".concat(c,"slide-swiping-hoverer ").concat(l," ").concat(d),o(a),function(e){var t=e.core.sourcesPointerDown,n=e.elements,i=e.props.sources,r=document.createElement("div");r.className="".concat(d," ").concat(l),n.container.appendChild(r),r.addEventListener("pointerdown",t.listener),n.sourceWrappersContainer=r;for(var o=0;o<i.length;o++)!function(e,t){var n=e.componentsServices.hideSourceLoaderIfNotYetCollection,i=e.elements,r=i.sourceWrappersContainer,o=i.sourceMainWrappers;o[t]=document.createElement("div"),o[t].className="".concat(d," ").concat(l," ").concat(u),o[t].innerHTML='<div class="fslightbox-loader"><div></div><div></div><div></div><div></div></div>';var s=o[t].firstChild;n[t]=function(){o[t].contains(s)&&o[t].removeChild(s)},r.appendChild(o[t]),n=t,r=e.elements,e=r.sourceMainWrappers,(r=r.sourceAnimationWrappers)[n]=document.createElement("div"),e[n].appendChild(r[n])}(e,o)}(a),1<i.length&&(i=(n=a).core.slideChangeFacade,O(n,i.changeToPrevious,"previous","M18.271,9.212H3.615l4.184-4.184c0.306-0.306,0.306-0.801,0-1.107c-0.306-0.306-0.801-0.306-1.107,0L1.21,9.403C1.194,9.417,1.174,9.421,1.158,9.437c-0.181,0.181-0.242,0.425-0.209,0.66c0.005,0.038,0.012,0.071,0.022,0.109c0.028,0.098,0.075,0.188,0.142,0.271c0.021,0.026,0.021,0.061,0.045,0.085c0.015,0.016,0.034,0.02,0.05,0.033l5.484,5.483c0.306,0.307,0.801,0.307,1.107,0c0.306-0.305,0.306-0.801,0-1.105l-4.184-4.185h14.656c0.436,0,0.788-0.353,0.788-0.788S18.707,9.212,18.271,9.212z"),O(n,i.changeToNext,"next","M1.729,9.212h14.656l-4.184-4.184c-0.307-0.306-0.307-0.801,0-1.107c0.305-0.306,0.801-0.306,1.106,0l5.481,5.482c0.018,0.014,0.037,0.019,0.053,0.034c0.181,0.181,0.242,0.425,0.209,0.66c-0.004,0.038-0.012,0.071-0.021,0.109c-0.028,0.098-0.075,0.188-0.143,0.271c-0.021,0.026-0.021,0.061-0.045,0.085c-0.015,0.016-0.034,0.02-0.051,0.033l-5.483,5.483c-0.306,0.307-0.802,0.307-1.106,0c-0.307-0.305-0.307-0.801,0-1.105l4.184-4.185H1.729c-0.436,0-0.788-0.353-0.788-0.788S1.293,9.212,1.729,9.212z")),function(){for(var e,t=a.props.sources,n=a.resolve,i=n(v),r=n(F),o=n(P,[i,r]),s=0;s<t.length;s++)"string"==typeof t[s]?(e=o.getTypeSetByClientForIndex(s))?r.runActionsForSourceTypeAndIndex(e,s):(e=i.getSourceTypeFromLocalStorageByUrl(t[s]))?r.runActionsForSourceTypeAndIndex(e,s):o.retrieveTypeWithXhrForIndex(s):r.runActionsForSourceTypeAndIndex("custom",s)}(),e.dispatch("onInit")}function Z(t){var n=t.collections.sourceMainWrappersTransformers,i=t.componentsServices,e=t.core,r=e.eventsDispatcher,o=e.lightboxOpener,s=e.globalEventsController,a=e.scrollbarRecompensor,c=e.sourceDisplayFacade,l=e.stageManager,u=e.windowResizeActioner,d=t.data,h=t.elements,p=t.stageIndexes;o.open=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;p.current=e,d.isInitialized?r.dispatch("onShow"):M(t),l.updateStageIndexes(),c.displaySourcesWhichShouldBeDisplayed(),i.setSlideNumber(e+1),document.body.appendChild(h.container),document.documentElement.classList.add(f),a.addRecompense(),s.attachListeners(),u.runActions(),n[p.current].zero(),r.dispatch("onOpen")}}function W(e,t,n){return(W=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);i=new(Function.bind.apply(e,i));return n&&H(i,n.prototype),i}).apply(null,arguments)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ee(){for(var d=document.getElementsByTagName("a"),e=0;e<d.length;e++)!function(n){if(d[n].hasAttribute("data-fslightbox")){var i=d[n].getAttribute("data-fslightbox"),e=d[n].getAttribute("href");fsLightboxInstances[i]||(fsLightboxInstances[i]=new FsLightbox);var t=null;"#"===e.charAt(0)?(t=document.getElementById(e.substring(1)).cloneNode(!0)).removeAttribute("id"):t=e,fsLightboxInstances[i].props.sources.push(t),fsLightboxInstances[i].elements.a.push(d[n]);var r=fsLightboxInstances[i].props.sources.length-1;d[n].onclick=function(e){e.preventDefault(),fsLightboxInstances[i].open(r)},u("types","data-type"),u("videosPosters","data-video-poster"),u("customClasses","data-class"),u("customClasses","data-custom-class");for(var o,s=["href","data-fslightbox","data-type","data-video-poster","data-class","data-custom-class"],a=d[n].attributes,c=fsLightboxInstances[i].props.customAttributes,l=0;l<a.length;l++)-1===s.indexOf(a[l].name)&&"data-"===a[l].name.substr(0,5)&&(c[r]||(c[r]={}),o=a[l].name.substr(5),c[r][o]=a[l].value)}function u(e,t){d[n].hasAttribute(t)&&(fsLightboxInstances[i].props[e][r]=d[n].getAttribute(t))}}(e);var t=Object.keys(fsLightboxInstances);window.fsLightbox=fsLightboxInstances[t[t.length-1]]}"object"===("undefined"==typeof document?"undefined":i(document))&&((t=document.createElement("style")).className=n,t.appendChild(document.createTextNode(".fslightbox-absoluted{position:absolute;top:0;left:0}.fslightbox-fade-in{animation:fslightbox-fade-in .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out{animation:fslightbox-fade-out .3s ease}.fslightbox-fade-in-strong{animation:fslightbox-fade-in-strong .3s cubic-bezier(0,0,.7,1)}.fslightbox-fade-out-strong{animation:fslightbox-fade-out-strong .3s ease}@keyframes fslightbox-fade-in{from{opacity:.65}to{opacity:1}}@keyframes fslightbox-fade-out{from{opacity:.35}to{opacity:0}}@keyframes fslightbox-fade-in-strong{from{opacity:.3}to{opacity:1}}@keyframes fslightbox-fade-out-strong{from{opacity:1}to{opacity:0}}.fslightbox-cursor-grabbing{cursor:grabbing}.fslightbox-full-dimension{width:100%;height:100%}.fslightbox-open{overflow:hidden;height:100%}.fslightbox-flex-centered{display:flex;justify-content:center;align-items:center}.fslightbox-opacity-0{opacity:0!important}.fslightbox-opacity-1{opacity:1!important}.fslightbox-scrollbarfix{padding-right:17px}.fslightbox-transform-transition{transition:transform .3s}.fslightbox-container{font-family:Arial,sans-serif;position:fixed;top:0;left:0;background:linear-gradient(rgba(30,30,30,.9),#000 1810%);touch-action:pinch-zoom;z-index:1000000000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.fslightbox-container *{box-sizing:border-box}.fslightbox-svg-path{transition:fill .15s ease;fill:#ddd}.fslightbox-nav{height:45px;width:100%;position:absolute;top:0;left:0}.fslightbox-slide-number-container{display:flex;justify-content:center;align-items:center;position:relative;height:100%;font-size:15px;color:#d7d7d7;z-index:0;max-width:55px;text-align:left}.fslightbox-slide-number-container .fslightbox-flex-centered{height:100%}.fslightbox-slash{display:block;margin:0 5px;width:1px;height:12px;transform:rotate(15deg);background:#fff}.fslightbox-toolbar{position:absolute;z-index:3;right:0;top:0;height:100%;display:flex;background:rgba(35,35,35,.65)}.fslightbox-toolbar-button{height:100%;width:45px;cursor:pointer}.fslightbox-toolbar-button:hover .fslightbox-svg-path{fill:#fff}.fslightbox-slide-btn-container{display:flex;align-items:center;padding:12px 12px 12px 6px;position:absolute;top:50%;cursor:pointer;z-index:3;transform:translateY(-50%)}@media (min-width:476px){.fslightbox-slide-btn-container{padding:22px 22px 22px 6px}}@media (min-width:768px){.fslightbox-slide-btn-container{padding:30px 30px 30px 6px}}.fslightbox-slide-btn-container:hover .fslightbox-svg-path{fill:#f1f1f1}.fslightbox-slide-btn{padding:9px;font-size:26px;background:rgba(35,35,35,.65)}@media (min-width:768px){.fslightbox-slide-btn{padding:10px}}@media (min-width:1600px){.fslightbox-slide-btn{padding:11px}}.fslightbox-slide-btn-container-previous{left:0}@media (max-width:475.99px){.fslightbox-slide-btn-container-previous{padding-left:3px}}.fslightbox-slide-btn-container-next{right:0;padding-left:12px;padding-right:3px}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-left:22px}}@media (min-width:768px){.fslightbox-slide-btn-container-next{padding-left:30px}}@media (min-width:476px){.fslightbox-slide-btn-container-next{padding-right:6px}}.fslightbox-down-event-detector{position:absolute;z-index:1}.fslightbox-slide-swiping-hoverer{z-index:4}.fslightbox-invalid-file-wrapper{font-size:22px;color:#eaebeb;margin:auto}.fslightbox-video{object-fit:cover}.fslightbox-youtube-iframe{border:0}.fslightbox-loader{display:block;margin:auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:67px;height:67px}.fslightbox-loader div{box-sizing:border-box;display:block;position:absolute;width:54px;height:54px;margin:6px;border:5px solid;border-color:#999 transparent transparent transparent;border-radius:50%;animation:fslightbox-loader 1.2s cubic-bezier(.5,0,.5,1) infinite}.fslightbox-loader div:nth-child(1){animation-delay:-.45s}.fslightbox-loader div:nth-child(2){animation-delay:-.3s}.fslightbox-loader div:nth-child(3){animation-delay:-.15s}@keyframes fslightbox-loader{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fslightbox-source{position:relative;z-index:2;opacity:0}")),document.head.appendChild(t)),window.FsLightbox=function(){var n=this;this.props={sources:[],customAttributes:[],customClasses:[],types:[],videosPosters:[],slideDistance:.3},this.data={isInitialized:!1,isFullscreenOpen:!1,maxSourceWidth:0,maxSourceHeight:0,scrollbarWidth:0},this.sourcePointerProps={downScreenX:null,isPointering:!1,isSourceDownEventTarget:!1,swipedX:0},this.stageIndexes={},this.elements={a:[],container:null,slideSwipingHoverer:null,sourceWrappersContainer:null,sources:[],sourceMainWrappers:[],sourceAnimationWrappers:[]},this.componentsServices={enterFullscreen:null,exitFullscreen:null,hideSourceLoaderIfNotYetCollection:[],setSlideNumber:function(){}},this.resolve=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return t.unshift(n),W(e,function(e){if(Array.isArray(e))return V(e)}(t=t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e){if(e){if("string"==typeof e)return V(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?V(e,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},this.collections={sourceMainWrappersTransformers:[],sourceLoadHandlers:[],sourcesRenderFunctions:[],sourceSizers:[]},this.core={classFacade:{},eventsDispatcher:{},fullscreenToggler:{},globalEventsController:{},lightboxCloser:{},lightboxOpener:{},lightboxUpdater:{},scrollbarRecompensor:{},slideChangeFacade:{},slideIndexChanger:{},sourcesPointerDown:{},sourceDisplayFacade:{},stageManager:{},windowResizeActioner:{}},Z(this),this.open=function(e){return n.core.lightboxOpener.open(e)},this.close=function(){return n.core.lightboxCloser.closeLightbox()}},window.fsLightboxInstances={},ee(),window.refreshFsLightbox=function(){for(var e in fsLightboxInstances){var t=fsLightboxInstances[e].props;fsLightboxInstances[e]=new FsLightbox,fsLightboxInstances[e].props=t,fsLightboxInstances[e].props.sources=[],fsLightboxInstances[e].elements.a=[]}ee()}}],r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0);function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,i}),function(x){var e;function i(e){return e.replace(/^\//,"").replace(/\//g,"-")}function y(){x(".gh-search-item").each(function(){var e=this.getAttribute("id").replace(/^new-/,"");this.setAttribute("id",e)})}function n(){this.blogData={},this.latestPost=0;var e=(ghost_root_url||"/ghost/api/v2")+"/content/posts/?key="+ghosthunter_key+"&limit=all&include=tags",t={limit:"all",include:"tags"};this.includebodysearch?(t.formats=["plaintext"],e+="&formats=plaintext"):t.formats=[""];var o=this;x.get(e).done(function(e){var t=e.posts;o.index=lunr(function(){this.ref("id"),this.field("title"),this.field("description"),o.includebodysearch&&this.field("plaintext"),this.field("pubDate"),this.field("tag"),t.forEach(function(e){var t=new Date(e.updated_at).getTime();new Date(o.latestPost).getTime()<t&&(o.latestPost=e.updated_at);var n=e.tags.map(function(e){return e.name});null==e.meta_description&&(e.meta_description="");var i=n.join(", ");i.length<1&&(i="undefined");var r=(r=null==(r=e.custom_excerpt)||""==r?e.excerpt:r).split(" ").slice(0,30).join(" "),t={id:String(e.id),title:String(e.title),description:String(r),pubDate:String(e.published_at),tag:i};o.includebodysearch&&(t.plaintext=String(e.plaintext)),this.add(t),i=o.subpath+e.url,o.blogData[e.id]={title:e.title,description:r,pubDate:(t=t.pubDate,["January","February","March","April","May","June","July","August","September","October","November","December"][(t=new Date(t)).getMonth()]+" "+t.getDate()+", "+t.getFullYear()),link:i,tags:n},o.item_preprocessor&&Object.assign(o.blogData[e.id],o.item_preprocessor(e))},this)});try{var n=i(o.subpath);localStorage.setItem("ghost_"+n+"_lunrIndex",JSON.stringify(o.index)),localStorage.setItem("ghost_"+n+"_blogData",JSON.stringify(o.blogData)),localStorage.setItem("ghost_"+n+"_latestPost",o.latestPost)}catch(e){console.warn("ghostHunter: save to localStorage failed: "+e)}o.indexing_end&&o.indexing_end(),o.isInit=!0})}!function(){function A(e){var t=new A.Builder;return t.pipeline.add(A.trimmer,A.stopWordFilter,A.stemmer),t.searchPipeline.add(A.stemmer),e.call(t,t),t.build()}var t,l,u,d,h,p,f,m,g,v,x,y,b,w,S,L,I,T,k,E,F,C,P,e;function n(e){var t,n,i,r,o,s,a,c;return e.length<3?e:("y"==(n=e.substr(0,1))&&(e=n.toUpperCase()+e.substr(1)),a=g,(o=m).test(e)?e=e.replace(o,"$1$2"):a.test(e)&&(e=e.replace(a,"$1$2")),a=x,(o=v).test(e)?(c=o.exec(e),(o=d).test(c[1])&&(e=e.replace(o=y,""))):a.test(e)&&(s=(c=a.exec(e))[1],(a=f).test(s)&&(e=s,i=w,r=S,(a=b).test(e)?e+="e":i.test(e)?e=e.replace(o=y,""):r.test(e)&&(e+="e"))),(o=L).test(e)&&(e=(s=(c=o.exec(e))[1])+"i"),(o=I).test(e)&&(s=(c=o.exec(e))[1],t=c[2],(o=d).test(s)&&(e=s+l[t])),(o=T).test(e)&&(s=(c=o.exec(e))[1],t=c[2],(o=d).test(s)&&(e=s+u[t])),a=E,(o=k).test(e)?(s=(c=o.exec(e))[1],(o=h).test(s)&&(e=s)):a.test(e)&&(s=(c=a.exec(e))[1]+c[2],(a=h).test(s)&&(e=s)),(o=F).test(e)&&(s=(c=o.exec(e))[1],a=p,i=P,((o=h).test(s)||a.test(s)&&!i.test(s))&&(e=s)),a=h,(o=C).test(e)&&a.test(e)&&(e=e.replace(o=y,"")),"y"==n?n.toLowerCase()+e.substr(1):e)}A.version="2.1.5",(A.utils={}).warn=(t=this,function(e){t.console&&console.warn&&console.warn(e)}),A.utils.asString=function(e){return null==e?"":e.toString()},(A.FieldRef=function(e,t,n){this.docRef=e,this.fieldName=t,this._stringValue=n}).joiner="/",A.FieldRef.fromString=function(e){if(-1===(n=e.indexOf(A.FieldRef.joiner)))throw"malformed field ref string";var t=e.slice(0,n),n=e.slice(n+1);return new A.FieldRef(n,t,e)},A.FieldRef.prototype.toString=function(){return null==this._stringValue&&(this._stringValue=this.fieldName+A.FieldRef.joiner+this.docRef),this._stringValue},A.idf=function(e,t){var n,i=0;for(n in e)"_index"!=n&&(i+=Object.keys(e[n]).length);return Math.log(1+Math.abs((t-i+.5)/(i+.5)))},(A.Token=function(e,t){this.str=e||"",this.metadata=t||{}}).prototype.toString=function(){return this.str},A.Token.prototype.update=function(e){return this.str=e(this.str,this.metadata),this},A.Token.prototype.clone=function(e){return new A.Token((e=e||function(e){return e})(this.str,this.metadata),this.metadata)},(A.tokenizer=function(e){if(null==e)return[];if(Array.isArray(e))return e.map(function(e){return new A.Token(A.utils.asString(e).toLowerCase())});for(var t=e.toString().trim().toLowerCase(),n=t.length,i=[],r=0,o=0;r<=n;r++){var s=r-o;!t.charAt(r).match(A.tokenizer.separator)&&r!=n||(0<s&&i.push(new A.Token(t.slice(o,r),{position:[o,s],index:i.length})),o=r+1)}return i}).separator=/[\s\-]+/,(A.Pipeline=function(){this._stack=[]}).registeredFunctions=Object.create(null),A.Pipeline.registerFunction=function(e,t){t in this.registeredFunctions&&A.utils.warn("Overwriting existing registered function: "+t),e.label=t,A.Pipeline.registeredFunctions[e.label]=e},A.Pipeline.warnIfFunctionNotRegistered=function(e){e.label&&e.label in this.registeredFunctions||A.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},A.Pipeline.load=function(e){var n=new A.Pipeline;return e.forEach(function(e){var t=A.Pipeline.registeredFunctions[e];if(!t)throw new Error("Cannot load unregistered function: "+e);n.add(t)}),n},A.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){A.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},A.Pipeline.prototype.after=function(e,t){if(A.Pipeline.warnIfFunctionNotRegistered(t),-1==(e=this._stack.indexOf(e)))throw new Error("Cannot find existingFn");this._stack.splice(e+=1,0,t)},A.Pipeline.prototype.before=function(e,t){if(A.Pipeline.warnIfFunctionNotRegistered(t),-1==(e=this._stack.indexOf(e)))throw new Error("Cannot find existingFn");this._stack.splice(e,0,t)},A.Pipeline.prototype.remove=function(e){-1!=(e=this._stack.indexOf(e))&&this._stack.splice(e,1)},A.Pipeline.prototype.run=function(i){for(var e=this._stack.length,t=0;t<e;t++){var r=this._stack[t];i=i.reduce(function(e,t,n){return void 0===(n=r(t,n,i))||""===n?e:e.concat(n)},[])}return i},A.Pipeline.prototype.runString=function(e){return e=new A.Token(e),this.run([e]).map(function(e){return e.toString()})},A.Pipeline.prototype.reset=function(){this._stack=[]},A.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return A.Pipeline.warnIfFunctionNotRegistered(e),e.label})},(A.Vector=function(e){this._magnitude=0,this.elements=e||[]}).prototype.positionForIndex=function(e){if(0==this.elements.length)return 0;for(var t=0,n=this.elements.length/2,i=n-t,r=Math.floor(i/2),o=this.elements[2*r];1<i&&(o<e&&(t=r),e<o&&(n=r),o!=e);)i=n-t,r=t+Math.floor(i/2),o=this.elements[2*r];return o==e||e<o?2*r:o<e?2*(r+1):void 0},A.Vector.prototype.insert=function(e,t){this.upsert(e,t,function(){throw"duplicate index"})},A.Vector.prototype.upsert=function(e,t,n){this._magnitude=0;var i=this.positionForIndex(e);this.elements[i]==e?this.elements[i+1]=n(this.elements[i+1],t):this.elements.splice(i,0,e,t)},A.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e=0,t=this.elements.length,n=1;n<t;n+=2){var i=this.elements[n];e+=i*i}return this._magnitude=Math.sqrt(e)},A.Vector.prototype.dot=function(e){for(var t,n,i=0,r=this.elements,o=e.elements,s=r.length,a=o.length,c=0,l=0;c<s&&l<a;)(t=r[c])<(n=o[l])?c+=2:n<t?l+=2:t==n&&(i+=r[c+1]*o[l+1],c+=2,l+=2);return i},A.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},A.Vector.prototype.toArray=function(){for(var e=new Array(this.elements.length/2),t=1,n=0;t<this.elements.length;t+=2,n++)e[n]=this.elements[t];return e},A.Vector.prototype.toJSON=function(){return this.elements},A.stemmer=(l={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},u={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},d=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),h=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*"),p=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),f=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),m=/^(.+?)(ss|i)es$/,g=/^(.+?)([^s])s$/,v=/^(.+?)eed$/,x=/^(.+?)(ed|ing)$/,y=/.$/,b=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),S=new RegExp("^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$"),L=/^(.+?[^aeiou])y$/,I=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,T=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,k=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,E=/^(.+?)(s|t)(ion)$/,F=/^(.+?)e$/,C=/ll$/,P=new RegExp("^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$"),function(e){return e.update(n)}),A.Pipeline.registerFunction(A.stemmer,"stemmer"),A.stopWordFilter=(A.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e.toString()]!==e.toString())return e}})(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),A.Pipeline.registerFunction(A.stopWordFilter,"stopWordFilter"),A.Pipeline.registerFunction(A.trimmer=function(e){return e.update(function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")})},"trimmer"),(A.TokenSet=function(){this.final=!1,this.edges={},this.id=A.TokenSet._nextId,A.TokenSet._nextId+=1})._nextId=1,A.TokenSet.fromArray=function(e){for(var t=new A.TokenSet.Builder,n=0,i=e.length;n<i;n++)t.insert(e[n]);return t.finish(),t.root},A.TokenSet.fromClause=function(e){return"editDistance"in e?A.TokenSet.fromFuzzyString(e.term,e.editDistance):A.TokenSet.fromString(e.term)},A.TokenSet.fromFuzzyString=function(e,t){for(var n=new A.TokenSet,i=[{node:n,editsRemaining:t,str:e}];i.length;){var r,o,s,a,c,l,u,d,h=i.pop();0<h.str.length&&((o=h.str.charAt(0))in h.node.edges?r=h.node.edges[o]:(r=new A.TokenSet,h.node.edges[o]=r),1==h.str.length?r.final=!0:i.push({node:r,editsRemaining:h.editsRemaining,str:h.str.slice(1)})),0<h.editsRemaining&&1<h.str.length&&((o=h.str.charAt(1))in h.node.edges?s=h.node.edges[o]:(s=new A.TokenSet,h.node.edges[o]=s),h.str.length<=2?s.final=!0:i.push({node:s,editsRemaining:h.editsRemaining-1,str:h.str.slice(2)})),0<h.editsRemaining&&1==h.str.length&&(h.node.final=!0),0<h.editsRemaining&&1<=h.str.length&&("*"in h.node.edges?a=h.node.edges["*"]:(a=new A.TokenSet,h.node.edges["*"]=a),1==h.str.length?a.final=!0:i.push({node:a,editsRemaining:h.editsRemaining-1,str:h.str.slice(1)})),0<h.editsRemaining&&("*"in h.node.edges?c=h.node.edges["*"]:(c=new A.TokenSet,h.node.edges["*"]=c),0==h.str.length?c.final=!0:i.push({node:c,editsRemaining:h.editsRemaining-1,str:h.str})),0<h.editsRemaining&&1<h.str.length&&(l=h.str.charAt(0),(u=h.str.charAt(1))in h.node.edges?d=h.node.edges[u]:(d=new A.TokenSet,h.node.edges[u]=d),1==h.str.length?d.final=!0:i.push({node:d,editsRemaining:h.editsRemaining-1,str:l+h.str.slice(2)}))}return n},A.TokenSet.fromString=function(e){for(var t=new A.TokenSet,n=t,i=!1,r=0,o=e.length;r<o;r++){var s,a=e[r],c=r==o-1;"*"==a?(i=!0,(t.edges[a]=t).final=c):((s=new A.TokenSet).final=c,t.edges[a]=s,t=s,i&&(t.edges["*"]=n))}return n},A.TokenSet.prototype.toArray=function(){for(var e=[],t=[{prefix:"",node:this}];t.length;){var n=t.pop(),i=Object.keys(n.node.edges),r=i.length;n.node.final&&e.push(n.prefix);for(var o=0;o<r;o++){var s=i[o];t.push({prefix:n.prefix.concat(s),node:n.node.edges[s]})}}return e},A.TokenSet.prototype.toString=function(){if(this._str)return this._str;for(var e=this.final?"1":"0",t=Object.keys(this.edges).sort(),n=t.length,i=0;i<n;i++)var r=t[i],e=e+r+this.edges[r].id;return e},A.TokenSet.prototype.intersect=function(e){for(var t=new A.TokenSet,n=void 0,i=[{qNode:e,output:t,node:this}];i.length;)for(var n=i.pop(),r=Object.keys(n.qNode.edges),o=r.length,s=Object.keys(n.node.edges),a=s.length,c=0;c<o;c++)for(var l=r[c],u=0;u<a;u++){var d,h,p,f,m=s[u];m!=l&&"*"!=l||(d=n.node.edges[m],h=n.qNode.edges[l],p=d.final&&h.final,f=void 0,m in n.output.edges?(f=n.output.edges[m]).final=f.final||p:((f=new A.TokenSet).final=p,n.output.edges[m]=f),i.push({qNode:h,output:f,node:d}))}return t},A.TokenSet.Builder=function(){this.previousWord="",this.root=new A.TokenSet,this.uncheckedNodes=[],this.minimizedNodes={}},A.TokenSet.Builder.prototype.insert=function(e){var t=0;if(e<this.previousWord)throw new Error("Out of order word insertion");for(var n=0;n<e.length&&n<this.previousWord.length&&e[n]==this.previousWord[n];n++)t++;this.minimize(t);for(var i=0==this.uncheckedNodes.length?this.root:this.uncheckedNodes[this.uncheckedNodes.length-1].child,n=t;n<e.length;n++){var r=new A.TokenSet,o=e[n];i.edges[o]=r,this.uncheckedNodes.push({parent:i,char:o,child:r}),i=r}i.final=!0,this.previousWord=e},A.TokenSet.Builder.prototype.finish=function(){this.minimize(0)},A.TokenSet.Builder.prototype.minimize=function(e){for(var t=this.uncheckedNodes.length-1;e<=t;t--){var n=this.uncheckedNodes[t],i=n.child.toString();i in this.minimizedNodes?n.parent.edges[n.char]=this.minimizedNodes[i]:(n.child._str=i,this.minimizedNodes[i]=n.child),this.uncheckedNodes.pop()}},(A.Index=function(e){this.invertedIndex=e.invertedIndex,this.fieldVectors=e.fieldVectors,this.tokenSet=e.tokenSet,this.fields=e.fields,this.pipeline=e.pipeline}).prototype.search=function(t){return this.query(function(e){new A.QueryParser(t,e).parse()})},A.Index.prototype.query=function(e){var t=new A.Query(this.fields),n=Object.create(null),i=Object.create(null),r=Object.create(null);e.call(t,t);for(var o=0;o<t.clauses.length;o++)for(var s=(c=t.clauses[o]).usePipeline?this.pipeline.runString(c.term):[c.term],a=0;a<s.length;a++){var c,l=s[a];(c=JSON.parse(JSON.stringify(c))).term=l;for(var l=A.TokenSet.fromClause(c),u=this.tokenSet.intersect(l).toArray(),d=0;d<u.length;d++){var h=u[d],p=this.invertedIndex[h];if(p)for(var f=p._index,m=0;m<c.fields.length;m++){var g=c.fields[m],v=p[g],x=Object.keys(v),y=h+"/"+g;if(void 0===i[g]&&(i[g]=new A.Vector),i[g].upsert(f,+c.boost,function(e,t){return e+t}),!r[y]){for(var b=0;b<x.length;b++){var w=x[b],S=new A.FieldRef(w,g),L=v[w];void 0===(w=n[S])?n[S]=new A.MatchData(h,g,L):w.add(h,g,L)}r[y]=!0}}}}for(var I=Object.keys(n),T=[],k=Object.create(null),o=0;o<I.length;o++){var E=A.FieldRef.fromString(I[o]),F=E.docRef,C=this.fieldVectors[E],P=i[E.fieldName].similarity(C);void 0!==(C=k[F])?(C.score+=P,C.matchData.combine(n[E])):(E={ref:F,score:P,matchData:n[E]},k[F]=E,T.push(E))}return T.sort(function(e,t){return t.score-e.score})},A.Index.prototype.toJSON=function(){var e=Object.keys(this.invertedIndex).sort().map(function(e){return[e,this.invertedIndex[e]]},this),t=Object.keys(this.fieldVectors).map(function(e){return[e,this.fieldVectors[e].toJSON()]},this);return{version:A.version,fields:this.fields,fieldVectors:t,invertedIndex:e,pipeline:this.pipeline.toJSON()}},A.Index.load=function(e){var t={},n={},i=e.fieldVectors,r={},o=e.invertedIndex,s=new A.TokenSet.Builder,a=A.Pipeline.load(e.pipeline);e.version!=A.version&&A.utils.warn("Version mismatch when loading serialised index. Current version of lunr '"+A.version+"' does not match serialized index '"+e.version+"'");for(var c=0;c<i.length;c++){var l=(d=i[c])[0],u=d[1];n[l]=new A.Vector(u)}for(c=0;c<o.length;c++){var d,h=(d=o[c])[0],p=d[1];s.insert(h),r[h]=p}return s.finish(),t.fields=e.fields,t.fieldVectors=n,t.invertedIndex=r,t.tokenSet=s.root,t.pipeline=a,new A.Index(t)},(A.Builder=function(){this._ref="id",this._fields=[],this.invertedIndex=Object.create(null),this.fieldTermFrequencies={},this.fieldLengths={},this.tokenizer=A.tokenizer,this.pipeline=new A.Pipeline,this.searchPipeline=new A.Pipeline,this.documentCount=0,this._b=.75,this._k1=1.2,this.termIndex=0,this.metadataWhitelist=[]}).prototype.ref=function(e){this._ref=e},A.Builder.prototype.field=function(e){this._fields.push(e)},A.Builder.prototype.b=function(e){this._b=e<0?0:1<e?1:e},A.Builder.prototype.k1=function(e){this._k1=e},A.Builder.prototype.add=function(e){var t=e[this._ref];this.documentCount+=1;for(var n=0;n<this._fields.length;n++){var i=this._fields[n],r=e[i],r=this.tokenizer(r),o=this.pipeline.run(r),r=new A.FieldRef(t,i),s=Object.create(null);this.fieldTermFrequencies[r]=s,this.fieldLengths[r]=0,this.fieldLengths[r]+=o.length;for(var a=0;a<o.length;a++){var c=o[a];if(null==s[c]&&(s[c]=0),s[c]+=1,null==this.invertedIndex[c]){var l=Object.create(null);l._index=this.termIndex,this.termIndex+=1;for(var u=0;u<this._fields.length;u++)l[this._fields[u]]=Object.create(null);this.invertedIndex[c]=l}null==this.invertedIndex[c][i][t]&&(this.invertedIndex[c][i][t]=Object.create(null));for(var d=0;d<this.metadataWhitelist.length;d++){var h=this.metadataWhitelist[d],p=c.metadata[h];null==this.invertedIndex[c][i][t][h]&&(this.invertedIndex[c][i][t][h]=[]),this.invertedIndex[c][i][t][h].push(p)}}}},A.Builder.prototype.calculateAverageFieldLengths=function(){for(var e=Object.keys(this.fieldLengths),t=e.length,n={},i={},r=0;r<t;r++){var o=A.FieldRef.fromString(e[r]);i[s=o.fieldName]||(i[s]=0),i[s]+=1,n[s]||(n[s]=0),n[s]+=this.fieldLengths[o]}for(var s,r=0;r<this._fields.length;r++)n[s=this._fields[r]]=n[s]/i[s];this.averageFieldLength=n},A.Builder.prototype.createFieldVectors=function(){for(var e={},t=Object.keys(this.fieldTermFrequencies),n=t.length,i=Object.create(null),r=0;r<n;r++){for(var o=A.FieldRef.fromString(t[r]),s=o.fieldName,a=this.fieldLengths[o],c=new A.Vector,l=this.fieldTermFrequencies[o],u=Object.keys(l),d=u.length,h=0;h<d;h++){var p,f=u[h],m=l[f],g=this.invertedIndex[f]._index;void 0===i[f]?(p=A.idf(this.invertedIndex[f],this.documentCount),i[f]=p):p=i[f],m=p*((this._k1+1)*m)/(this._k1*(1-this._b+this._b*(a/this.averageFieldLength[s]))+m),m=Math.round(1e3*m)/1e3,c.insert(g,m)}e[o]=c}this.fieldVectors=e},A.Builder.prototype.createTokenSet=function(){this.tokenSet=A.TokenSet.fromArray(Object.keys(this.invertedIndex).sort())},A.Builder.prototype.build=function(){return this.calculateAverageFieldLengths(),this.createFieldVectors(),this.createTokenSet(),new A.Index({invertedIndex:this.invertedIndex,fieldVectors:this.fieldVectors,tokenSet:this.tokenSet,fields:this._fields,pipeline:this.searchPipeline})},A.Builder.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},(A.MatchData=function(e,t,n){for(var i=Object.create(null),r=Object.keys(n),o=0;o<r.length;o++){var s=r[o];i[s]=n[s].slice()}this.metadata=Object.create(null),this.metadata[e]=Object.create(null),this.metadata[e][t]=i}).prototype.combine=function(e){for(var t=Object.keys(e.metadata),n=0;n<t.length;n++){var i=t[n],r=Object.keys(e.metadata[i]);null==this.metadata[i]&&(this.metadata[i]=Object.create(null));for(var o=0;o<r.length;o++){var s=r[o],a=Object.keys(e.metadata[i][s]);null==this.metadata[i][s]&&(this.metadata[i][s]=Object.create(null));for(var c=0;c<a.length;c++){var l=a[c];null==this.metadata[i][s][l]?this.metadata[i][s][l]=e.metadata[i][s][l]:this.metadata[i][s][l]=this.metadata[i][s][l].concat(e.metadata[i][s][l])}}}},A.MatchData.prototype.add=function(e,t,n){if(!(e in this.metadata))return this.metadata[e]=Object.create(null),void(this.metadata[e][t]=n);if(t in this.metadata[e])for(var i=Object.keys(n),r=0;r<i.length;r++){var o=i[r];o in this.metadata[e][t]?this.metadata[e][t][o]=this.metadata[e][t][o].concat(n[o]):this.metadata[e][t][o]=n[o]}else this.metadata[e][t]=n},(A.Query=function(e){this.clauses=[],this.allFields=e}).wildcard=new String("*"),A.Query.wildcard.NONE=0,A.Query.wildcard.LEADING=1,A.Query.wildcard.TRAILING=2,A.Query.prototype.clause=function(e){return"fields"in e||(e.fields=this.allFields),"boost"in e||(e.boost=1),"usePipeline"in e||(e.usePipeline=!0),"wildcard"in e||(e.wildcard=A.Query.wildcard.NONE),e.wildcard&A.Query.wildcard.LEADING&&e.term.charAt(0)!=A.Query.wildcard&&(e.term="*"+e.term),e.wildcard&A.Query.wildcard.TRAILING&&e.term.slice(-1)!=A.Query.wildcard&&(e.term=e.term+"*"),this.clauses.push(e),this},A.Query.prototype.term=function(e,t){return(t=t||{}).term=e,this.clause(t),this},(A.QueryParseError=function(e,t,n){this.name="QueryParseError",this.message=e,this.start=t,this.end=n}).prototype=new Error,(A.QueryLexer=function(e){this.lexemes=[],this.str=e,this.length=e.length,this.pos=0,this.start=0,this.escapeCharPositions=[]}).prototype.run=function(){for(var e=A.QueryLexer.lexText;e;)e=e(this)},A.QueryLexer.prototype.sliceString=function(){for(var e,t=[],n=this.start,i=(this.pos,0);i<this.escapeCharPositions.length;i++)e=this.escapeCharPositions[i],t.push(this.str.slice(n,e)),n=e+1;return t.push(this.str.slice(n,this.pos)),this.escapeCharPositions.length=0,t.join("")},A.QueryLexer.prototype.emit=function(e){this.lexemes.push({type:e,str:this.sliceString(),start:this.start,end:this.pos}),this.start=this.pos},A.QueryLexer.prototype.escapeCharacter=function(){this.escapeCharPositions.push(this.pos-1),this.pos+=1},A.QueryLexer.prototype.next=function(){if(this.pos>=this.length)return A.QueryLexer.EOS;var e=this.str.charAt(this.pos);return this.pos+=1,e},A.QueryLexer.prototype.width=function(){return this.pos-this.start},A.QueryLexer.prototype.ignore=function(){this.start==this.pos&&(this.pos+=1),this.start=this.pos},A.QueryLexer.prototype.backup=function(){--this.pos},A.QueryLexer.prototype.acceptDigitRun=function(){for(var e,t;47<(t=(e=this.next()).charCodeAt(0))&&t<58;);e!=A.QueryLexer.EOS&&this.backup()},A.QueryLexer.prototype.more=function(){return this.pos<this.length},A.QueryLexer.EOS="EOS",A.QueryLexer.FIELD="FIELD",A.QueryLexer.TERM="TERM",A.QueryLexer.EDIT_DISTANCE="EDIT_DISTANCE",A.QueryLexer.BOOST="BOOST",A.QueryLexer.lexField=function(e){return e.backup(),e.emit(A.QueryLexer.FIELD),e.ignore(),A.QueryLexer.lexText},A.QueryLexer.lexTerm=function(e){if(1<e.width()&&(e.backup(),e.emit(A.QueryLexer.TERM)),e.ignore(),e.more())return A.QueryLexer.lexText},A.QueryLexer.lexEditDistance=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(A.QueryLexer.EDIT_DISTANCE),A.QueryLexer.lexText},A.QueryLexer.lexBoost=function(e){return e.ignore(),e.acceptDigitRun(),e.emit(A.QueryLexer.BOOST),A.QueryLexer.lexText},A.QueryLexer.lexEOS=function(e){0<e.width()&&e.emit(A.QueryLexer.TERM)},A.QueryLexer.termSeparator=A.tokenizer.separator,A.QueryLexer.lexText=function(e){for(;;){var t=e.next();if(t==A.QueryLexer.EOS)return A.QueryLexer.lexEOS;if(92!=t.charCodeAt(0)){if(":"==t)return A.QueryLexer.lexField;if("~"==t)return e.backup(),0<e.width()&&e.emit(A.QueryLexer.TERM),A.QueryLexer.lexEditDistance;if("^"==t)return e.backup(),0<e.width()&&e.emit(A.QueryLexer.TERM),A.QueryLexer.lexBoost;if(t.match(A.QueryLexer.termSeparator))return A.QueryLexer.lexTerm}else e.escapeCharacter()}},(A.QueryParser=function(e,t){this.lexer=new A.QueryLexer(e),this.query=t,this.currentClause={},this.lexemeIdx=0}).prototype.parse=function(){this.lexer.run(),this.lexemes=this.lexer.lexemes;for(var e=A.QueryParser.parseFieldOrTerm;e;)e=e(this);return this.query},A.QueryParser.prototype.peekLexeme=function(){return this.lexemes[this.lexemeIdx]},A.QueryParser.prototype.consumeLexeme=function(){var e=this.peekLexeme();return this.lexemeIdx+=1,e},A.QueryParser.prototype.nextClause=function(){var e=this.currentClause;this.query.clause(e),this.currentClause={}},A.QueryParser.parseFieldOrTerm=function(e){var t=e.peekLexeme();if(null!=t)switch(t.type){case A.QueryLexer.FIELD:return A.QueryParser.parseField;case A.QueryLexer.TERM:return A.QueryParser.parseTerm;default:var n="expected either a field or a term, found "+t.type;throw 1<=t.str.length&&(n+=" with value '"+t.str+"'"),new A.QueryParseError(n,t.start,t.end)}},A.QueryParser.parseField=function(e){var t=e.consumeLexeme();if(null!=t){if(-1==e.query.allFields.indexOf(t.str)){var n=e.query.allFields.map(function(e){return"'"+e+"'"}).join(", "),n="unrecognised field '"+t.str+"', possible fields: "+n;throw new A.QueryParseError(n,t.start,t.end)}if(e.currentClause.fields=[t.str],null==(e=e.peekLexeme()))throw n="expecting term, found nothing",new A.QueryParseError(n,t.start,t.end);if(e.type===A.QueryLexer.TERM)return A.QueryParser.parseTerm;throw n="expecting term, found '"+e.type+"'",new A.QueryParseError(n,e.start,e.end)}},A.QueryParser.parseTerm=function(e){var t=e.consumeLexeme();if(null!=t){e.currentClause.term=t.str.toLowerCase(),-1!=t.str.indexOf("*")&&(e.currentClause.usePipeline=!1);var n=e.peekLexeme();if(null!=n)switch(n.type){case A.QueryLexer.TERM:return e.nextClause(),A.QueryParser.parseTerm;case A.QueryLexer.FIELD:return e.nextClause(),A.QueryParser.parseField;case A.QueryLexer.EDIT_DISTANCE:return A.QueryParser.parseEditDistance;case A.QueryLexer.BOOST:return A.QueryParser.parseBoost;default:var i="Unexpected lexeme type '"+n.type+"'";throw new A.QueryParseError(i,n.start,n.end)}else e.nextClause()}},A.QueryParser.parseEditDistance=function(e){var t=e.consumeLexeme();if(null!=t){var n=parseInt(t.str,10);if(isNaN(n)){var i="edit distance must be numeric";throw new A.QueryParseError(i,t.start,t.end)}e.currentClause.editDistance=n;var r=e.peekLexeme();if(null!=r)switch(r.type){case A.QueryLexer.TERM:return e.nextClause(),A.QueryParser.parseTerm;case A.QueryLexer.FIELD:return e.nextClause(),A.QueryParser.parseField;case A.QueryLexer.EDIT_DISTANCE:return A.QueryParser.parseEditDistance;case A.QueryLexer.BOOST:return A.QueryParser.parseBoost;default:throw i="Unexpected lexeme type '"+r.type+"'",new A.QueryParseError(i,r.start,r.end)}else e.nextClause()}},A.QueryParser.parseBoost=function(e){var t=e.consumeLexeme();if(null!=t){var n=parseInt(t.str,10);if(isNaN(n)){var i="boost must be numeric";throw new A.QueryParseError(i,t.start,t.end)}e.currentClause.boost=n;var r=e.peekLexeme();if(null!=r)switch(r.type){case A.QueryLexer.TERM:return e.nextClause(),A.QueryParser.parseTerm;case A.QueryLexer.FIELD:return e.nextClause(),A.QueryParser.parseField;case A.QueryLexer.EDIT_DISTANCE:return A.QueryParser.parseEditDistance;case A.QueryLexer.BOOST:return A.QueryParser.parseBoost;default:throw i="Unexpected lexeme type '"+r.type+"'",new A.QueryParseError(i,r.start,r.end)}else e.nextClause()}},e=function(){return A},"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=A:this.lunr=A}(),e=function(e){function c(e,t){for(var n=-1,i=e.length;++n<i;)t(e[n],n,e)}function o(e,i){var r=Array(e.length);return c(e,function(e,t,n){r.push(i(e,t,n))}),r}function s(e,i,r){return c(e,function(e,t,n){r=i(e,t,n)}),r}function n(e,t){return e.charAt(t)}function l(e,t){return e[t]}function t(i,r){var o,s,t,a;if("string"==typeof i&&"string"==typeof r)a=n;else{if("object"!=typeof i||"object"!=typeof r)throw"Levensthtein: input must be two strings or two arrays";a=l}return t=this._matrix=[],i==r?this.distance=0:""==i?this.distance=r.length:""==r?this.distance=i.length:(o=[0],c(i,function(e,t){o[++t]=t}),t[0]=o,c(r,function(e,n){s=[++n],c(i,function(e,t){a(i,++t-1)==a(r,n-1)?s[t]=o[t-1]:s[t]=Math.min(o[t]+1,s[t-1]+1,o[t-1]+1)}),o=s,t[t.length]=o}),this.distance=s[s.length-1])}return t.prototype.toString=t.prototype.inspect=function(e){for(var t=this.getMatrix(),n=s(t,function(e,t){return Math.max(e,s(t,Math.max,0))},0),i=Array((n+"").length).join(" "),r=[];r.length<(t[0]&&t[0].length||0);)r[r.length]=Array(i.length+1).join("-");return r=r.join("-+")+"-",o(t,function(e){return o(e,function(e){return(i+e).slice(-i.length)}).join(" |")+" "}).join("\n"+r+"\n")},t.prototype.getSteps=function(){for(var e,t,n,i=[],r=this.getMatrix(),o=r.length-1,s=r[0].length-1;0!==o||0!==s;)n=0<s?r[o][s-1]:Number.MAX_VALUE,e=0<o?r[o-1][s]:Number.MAX_VALUE,t=0<s&&0<o?r[o-1][s-1]:Number.MAX_VALUE,(n=Math.min(n,e,t))===t?(t<r[o][s]&&i.push(["substitute",s,o]),o--,s--):n===e?(i.push(["insert",s,o]),o--):(i.push(["delete",s,o]),s--);return i},t.prototype.getMatrix=function(){return this._matrix.slice()},t.prototype.valueOf=function(){return this.distance},t},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e()}):"object"==typeof module&&module&&module.exports?module.exports=e():this.Levenshtein=e(),x.fn.ghostHunter=function(e){if((e=x.extend({},x.fn.ghostHunter.defaults,e)).results)return r.init(this,e),r},x.fn.ghostHunter.defaults={resultsData:!1,onPageLoad:!1,onKeyUp:!1,result_template:"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p><h2>{{title}}</h2><h4>{{pubDate}}</h4></p></a>",info_template:"<p>Number of posts found: {{amount}}</p>",displaySearchInfo:!0,zeroResultsInfo:!0,before:!1,onComplete:!1,filterfields:!1,subpath:"",item_preprocessor:!1,indexing_start:!1,indexing_end:!1,includebodysearch:!1};var t=null,r={isInit:!1,init:function(t,e){var n=this;n.target=t,Object.assign(this,e),e.onPageLoad?window.setTimeout(function(){n.loadAPI()},1):t.focus(function(){n.loadAPI()}),t.closest("form").submit(function(e){e.preventDefault(),n.find(t.val())}),e.onKeyUp&&(t.keydown(function(e){if(13===e.which)return!1}),t.keyup(function(e){n.find(t.val())}))},loadAPI:function(){if(!this.isInit){this.indexing_start&&this.indexing_start();try{var e=i(this.subpath);this.index=localStorage.getItem("ghost_"+e+"_lunrIndex"),this.blogData=localStorage.getItem("ghost_"+e+"_blogData"),this.latestPost=localStorage.getItem("ghost_"+e+"_latestPost"),this.latestPost&&this.index&&this.blogData&&(this.latestPost=this.latestPost,this.index=lunr.Index.load(JSON.parse(this.index)),this.blogData=JSON.parse(this.blogData),this.isInit=!0)}catch(e){console.warn("ghostHunter: retrieve from localStorage failed: "+e)}}var t;this.isInit?(this.latestPost.replace(/\..*/,"").replace(/T/," "),e=(ghost_root_url||"/ghost/api/v2")+"/content/posts/?key="+ghosthunter_key+"&limit=all&fields=id&filter=updated_at:>'"+this.latestPost.replace(/\..*/,"").replace(/T/," ")+"'",t=this,x.get(e).done(function(e){0<e.posts.length?n.call(t):(t.indexing_end&&t.indexing_end(),t.isInit=!0)})):n.call(this)},find:function(v){clearTimeout(t),v=(v=v||"").toLowerCase(),t=setTimeout(function(){for(var e=[],t=v.split(/\s+/),n=0,i=t.length;n<i;n++){var r=t[n];r&&e.push(this.index.query(function(e){e.term(r,{usePipeline:!0,boost:100}),e.term(r,{usePipeline:!1,boost:10,wildcard:lunr.Query.wildcard.TRAILING}),e.term(r,{usePipeline:!1,editDistance:1,boost:1})}))}if(1<e.length)for(var o=e[0],e=e.slice(1),n=o.length-1;-1<n;n--){var s=o[n].ref;for(j=0,jlen=e.length;j<jlen;j++){for(var a={},c=0,l=e[j].length;c<l;c++)a[e[j][c].ref]=!0;if(!a[s]){o=o.slice(0,n).concat(o.slice(n+1));break}}}else o=1===e.length?e[0]:[];var u=x(this.results),d=[];for(0===o.length?(u.empty(),this.displaySearchInfo&&this.zeroResultsInfo&&u.append(this.format(this.info_template,{amount:0}))):this.displaySearchInfo&&(0<u.length?u.children().eq(0).replaceWith(this.format(this.info_template,{amount:o.length})):u.append(this.format(this.info_template,{amount:o.length}))),this.before&&this.before(),n=0;n<o.length;n++){var h=o[n].ref,p=this.blogData[h];p?(p.ref=h,d.push(p)):console.warn("ghostHunter: index/data mismatch. Ouch.")}var f=x(".gh-search-item"),m=f.map(function(){return this.id.slice(3)}).get();if(0===m.length){for(n=0,i=d.length;n<i;n++)u.append(this.format(this.result_template,d[n]));y()}else{for(var g=[],n=0,i=o.length;n<i;n++)g.push(o[n].ref);m=new Levenshtein(m,g).getSteps(),function(e,t,n){for(var i=0,r=n.length;i<r;i++){var o,s=n[i];"delete"==s[0]?e.eq(s[1]-1).remove():(o=t[s[2]-1].ref,o=this.blogData[o],o=this.format(this.result_template,o),"substitute"===s[0]?e.eq(s[1]-1).replaceWith(o):"insert"===s[0]&&(s=0===s[1]?null:s[1]-1,e.eq(s).after(o)))}y()}.call(this,f,o,m)}this.onComplete&&this.onComplete(d)}.bind(this),100)},clear:function(){x(this.results).empty(),this.target.val("")},format:function(e,n){return e.replace(/{{([^{}]*)}}/g,function(e,t){return"string"==typeof(t=n[t])||"number"==typeof t?t:e})}}}(jQuery),function(t,n){var i,r,o,s,a,c,l,u=n.querySelector("link[rel=next]");function d(){if(404===this.status)return t.removeEventListener("scroll",p),void t.removeEventListener("resize",f);this.response.querySelectorAll("article.post-card").forEach(function(e){i.appendChild(n.importNode(e,!0))});var e=this.response.querySelector("link[rel=next]");e?u.href=e.href:(t.removeEventListener("scroll",p),t.removeEventListener("resize",f)),l=n.documentElement.scrollHeight,s=o=!1}function e(){var e;s||(a+c<=l-r?o=!1:(s=!0,(e=new t.XMLHttpRequest).responseType="document",e.addEventListener("load",d),e.open("GET",u.href),e.send(null)))}function h(){o||t.requestAnimationFrame(e),o=!0}function p(){a=t.scrollY,h()}function f(){c=t.innerHeight,l=n.documentElement.scrollHeight,h()}!u||(i=n.querySelector(".post-feed"))&&(s=o=!(r=300),a=t.scrollY,c=t.innerHeight,l=n.documentElement.scrollHeight,t.addEventListener("scroll",p,{passive:!0}),t.addEventListener("resize",f),h())}(window,document);
//# sourceMappingURL=casper.js.map